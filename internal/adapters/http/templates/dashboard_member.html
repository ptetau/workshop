{{ define "content" }}
<div class="card">
    {{ if .IsTrial }}
    <h1>{{ if .TrainingLog }}Welcome, {{ .TrainingLog.MemberName }}!{{ else }}Welcome to Workshop!{{ end }}</h1>

    <div style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:1.5rem;border-radius:4px;margin-bottom:1.5rem;">
        <h2 style="margin:0 0 0.5rem;font-size:1.2rem;">Your Trial Experience</h2>
        <p style="margin:0 0 1rem;opacity:0.9;">We're glad you're here! Here's what to do next:</p>
        <div style="display:flex;flex-wrap:wrap;gap:1rem;">
            <div style="background:rgba(255,255,255,0.15);padding:0.75rem 1rem;border-radius:4px;flex:1;min-width:140px;">
                <div style="font-weight:600;margin-bottom:0.25rem;">{{ if .WaiverSigned }}&#10003; Waiver Signed{{ else }}&#9744; Sign Waiver{{ end }}</div>
                {{ if not .WaiverSigned }}<a href="/forms/sign-waiver" style="color:#F9B232;font-size:0.85rem;">Complete now &rarr;</a>{{ else }}<span style="font-size:0.85rem;opacity:0.8;">All done!</span>{{ end }}
            </div>
            <div style="background:rgba(255,255,255,0.15);padding:0.75rem 1rem;border-radius:4px;flex:1;min-width:140px;">
                <div style="font-weight:600;margin-bottom:0.25rem;">Ready to Join?</div>
                <span style="font-size:0.85rem;opacity:0.8;">Talk to your coach about signing up for full membership!</span>
            </div>
        </div>
    </div>
    {{ else }}
    <h1>{{ if .TrainingLog }}Welcome back, {{ .TrainingLog.MemberName }}{{ else }}My Dashboard{{ end }}</h1>
    {{ end }}

    {{ if .Belt }}
    <div style="display:flex;align-items:center;gap:0.5rem;margin:1rem 0 0.5rem;">
        <span style="display:inline-block;width:22px;height:12px;border-radius:2px;border:1px solid #ccc;vertical-align:middle;background:{{ if eq .Belt "white" }}#fff{{ else if eq .Belt "blue" }}#1565c0{{ else if eq .Belt "purple" }}#7b1fa2{{ else if eq .Belt "brown" }}#5d4037{{ else if eq .Belt "black" }}#212121{{ else if eq .Belt "yellow" }}#f9a825{{ else if eq .Belt "orange" }}#e65100{{ else if eq .Belt "green" }}#2e7d32{{ else if eq .Belt "grey" }}#9e9e9e{{ else }}#ccc{{ end }};"></span>
        <span style="font-weight:600;text-transform:capitalize;">{{ .Belt }}</span>
        {{ range $i := .Stripe | stripeRange }}<span style="display:inline-block;width:6px;height:6px;background:#fff;border:1px solid #999;border-radius:50%;margin-left:2px;vertical-align:middle;"></span>{{ end }}
    </div>
    {{ end }}

    {{ if .TrainingLog }}
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;margin:1.5rem 0;">
        <div style="background:var(--white);border:1px solid var(--border);padding:1.25rem;text-align:center;">
            <div style="font-size:1.75rem;font-weight:600;color:var(--orange);">{{ .TrainingLog.TotalClasses }}</div>
            <div style="color:var(--text-muted);margin-top:0.25rem;font-size:0.8rem;text-transform:uppercase;letter-spacing:0.5px;">Classes</div>
        </div>
        <div style="background:var(--white);border:1px solid var(--border);padding:1.25rem;text-align:center;">
            <div style="font-size:1.75rem;font-weight:600;color:var(--orange);">{{ printf "%.0f" .TrainingLog.TotalMatHours }}h</div>
            <div style="color:var(--text-muted);margin-top:0.25rem;font-size:0.8rem;text-transform:uppercase;letter-spacing:0.5px;">Mat Hours</div>
        </div>
        <div style="background:var(--white);border:1px solid var(--border);padding:1.25rem;text-align:center;">
            <div style="font-size:1.75rem;font-weight:600;color:var(--orange);">{{ .TrainingLog.CurrentStreak }}w</div>
            <div style="color:var(--text-muted);margin-top:0.25rem;font-size:0.8rem;text-transform:uppercase;letter-spacing:0.5px;">Streak</div>
        </div>
    </div>
    {{ end }}

    {{ if .TrainingGoal }}
    <div style="border-left:3px solid var(--orange);padding:0.75rem 1rem;margin-bottom:1.5rem;background:var(--bg);">
        <strong>Training Goal:</strong> {{ .TrainingGoal.Target }}x {{ .TrainingGoal.Period }}
    </div>
    {{ end }}

    {{ if gt .UnreadCount 0 }}
    <div style="border-left:3px solid #c62828;padding:0.75rem 1rem;margin-bottom:1.5rem;background:#fff3f3;">
        <strong>{{ .UnreadCount }} unread message{{ if gt .UnreadCount 1 }}s{{ end }}</strong>
    </div>
    {{ end }}

    <h2>Today's Classes</h2>
    {{ if .TodaysClasses }}
    <table style="width:100%;border-collapse:collapse;margin-bottom:1.5rem;">
        <thead>
            <tr style="border-bottom:2px solid var(--border);">
                <th style="padding:0.5rem;text-align:left;font-size:0.8rem;text-transform:uppercase;letter-spacing:0.5px;color:var(--text-muted);">Time</th>
                <th style="padding:0.5rem;text-align:left;font-size:0.8rem;text-transform:uppercase;letter-spacing:0.5px;color:var(--text-muted);">Class</th>
                <th style="padding:0.5rem;text-align:left;font-size:0.8rem;text-transform:uppercase;letter-spacing:0.5px;color:var(--text-muted);">Program</th>
            </tr>
        </thead>
        <tbody>
            {{ range .TodaysClasses }}
            <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:0.5rem;">{{ .StartTime }} - {{ .EndTime }}</td>
                <td style="padding:0.5rem;font-weight:600;">{{ .ClassTypeName }}</td>
                <td style="padding:0.5rem;">{{ .ProgramName }}</td>
            </tr>
            {{ end }}
        </tbody>
    </table>
    {{ else }}
    <p style="color:var(--text-muted);font-style:italic;">No classes scheduled today.</p>
    {{ end }}

    {{ if .Notices }}
    <h2>Notices</h2>
    {{ range .Notices }}
    <div style="border-left:3px solid {{ noticeColorHex .Color }};padding:0.75rem 1rem;margin-bottom:0.75rem;background:var(--bg);">
        <div style="display:flex;justify-content:space-between;align-items:center;">
            <strong>{{ if .Pinned }}ðŸ“Œ {{ end }}{{ .Title }}</strong>
            {{ if and .ShowAuthor .AuthorName }}<span style="font-size:0.75rem;color:var(--text-muted);">â€” {{ .AuthorName }}</span>{{ end }}
        </div>
        <div style="margin:0.4rem 0 0;color:var(--text-muted);font-size:0.9rem;">{{ renderMarkdown .Content }}</div>
    </div>
    {{ end }}
    {{ end }}

    <h2>Quick Links</h2>
    <div style="display:flex;flex-wrap:wrap;gap:0.75rem;margin-top:0.75rem;">
        <a href="/training-log" style="background:var(--orange);color:white;padding:0.5rem 1.25rem;text-decoration:none;font-weight:600;font-size:0.85rem;text-transform:uppercase;letter-spacing:0.5px;">Training Log</a>
        <a href="/messages" style="background:var(--dark);color:white;padding:0.5rem 1.25rem;text-decoration:none;font-weight:600;font-size:0.85rem;text-transform:uppercase;letter-spacing:0.5px;">Messages{{ if gt .UnreadCount 0 }} <span style="background:var(--orange);color:white;border-radius:10px;padding:0.1rem 0.5rem;font-size:0.75rem;margin-left:0.25rem;">{{ .UnreadCount }}</span>{{ end }}</a>
        {{ if not .IsTrial }}
        <a href="/curriculum" style="background:var(--dark);color:white;padding:0.5rem 1.25rem;text-decoration:none;font-weight:600;font-size:0.85rem;text-transform:uppercase;letter-spacing:0.5px;">Curriculum</a>
        <a href="/themes" style="background:var(--dark);color:white;padding:0.5rem 1.25rem;text-decoration:none;font-weight:600;font-size:0.85rem;text-transform:uppercase;letter-spacing:0.5px;">Themes</a>
        <a href="/library" style="background:var(--dark);color:white;padding:0.5rem 1.25rem;text-decoration:none;font-weight:600;font-size:0.85rem;text-transform:uppercase;letter-spacing:0.5px;">Library</a>
        {{ end }}
    </div>
</div>
{{ end }}
